{% extends "base.html" %}

{% block content %}
<div class="bg-white rounded-3xl shadow-2xl overflow-hidden" 
     x-data="{ excelReady: false, pdfReady: false, loading: false }">
    
    <div class="bg-gray-50 p-8 border-b border-gray-100">
        <h1 class="text-3xl font-black text-bsh-black uppercase tracking-tight">SIR helper</h1>
        <p class="text-gray-500 font-medium">Scanning SIR & adnotating technical drawing</p>
    </div>

    <form hx-post="/analyze" 
          hx-encoding="multipart/form-data" 
          hx-target="#action-area" 
          @submit="loading = true"
          class="p-10 space-y-10">
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
            <div class="space-y-4">
                <p class="text-xs font-black uppercase text-gray-400 tracking-widest ml-1">Step 1: SIR</p>
                <div class="group relative h-56 border-4 border-dashed border-gray-100 rounded-2xl bg-gray-50 hover:bg-white hover:border-bsh-orange transition-all flex flex-col items-center justify-center p-8 text-center">
                    <input type="file" name="excel_file" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                           @change="excelReady = $event.target.files.length > 0">
                    <div class="w-16 h-16 bg-white rounded-full shadow-sm flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <svg class="w-8 h-8 text-bsh-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                    </div>
                    <p class="font-bold text-bsh-black" x-text="excelReady ? 'File XLSX gotowy' : 'Choose SIR'"></p>
                </div>
            </div>

            <div class="space-y-4">
                <p class="text-xs font-black uppercase text-gray-400 tracking-widest ml-1">Step 2: Technical Drawing</p>
                <div class="group relative h-56 border-4 border-dashed border-gray-100 rounded-2xl bg-gray-50 hover:bg-white hover:border-bsh-orange transition-all flex flex-col items-center justify-center p-8 text-center">
                    <input type="file" name="pdf_file" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                           @change="pdfReady = $event.target.files.length > 0">
                    <div class="w-16 h-16 bg-white rounded-full shadow-sm flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <svg class="w-8 h-8 text-bsh-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
                    </div>
                    <p class="font-bold text-bsh-black" x-text="pdfReady ? 'PDF file ready' : 'Choose PDF file'"></p>
                </div>
            </div>
        </div>

        <div id="action-area" class="flex justify-center pt-6">
            <button type="submit" 
                    class="btn-default w-full md:w-3/4 py-5 shadow-2xl disabled:opacity-20"
                    :disabled="!excelReady || !pdfReady || loading">
                <span x-show="!loading" class="tracking-widest">Run Analysis</span>
                <span x-show="loading" class="flex items-center justify-center">
                    <svg class="animate-spin h-6 w-6 mr-3 border-2 border-white border-t-transparent rounded-full" viewBox="0 0 24 24"></svg>
                    Processing...
                </span>
            </button>
        </div>
    </form>
</div>
{% endblock %}
